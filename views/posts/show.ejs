<% layout('layouts/boilerplate') -%>
    <!-- <h1>
        <%=post.title%>
    </h1>

    <h3>
        <%=post.content %>
    </h3>

    <h5>Author---<%=post.author %>
    </h5>

    <h3 id="displayLike">
        <%= post.likes.length %>
    </h3> <button id="likeButton">Like</button>

    <button id="saveButton">
        <%= saveButtonText %>
    </button>

    <button id="followButton">
        <%= followButtonText %>
    </button>

    <h1>comments</h1>
    <input type="text" id="commentInput">
    <button id="commentSubmit">Submit</button>
    <ul id="commentsList">
        <% for(let comment of comments) { %>
            
            <li>
                <%= comment.comment %>--by <%= comment.user.username %>
                        <button class="deleteCommentButton" data-comment-id=<%=comment._id%>
                            >Delete</button>

            </li>
            <% } %>
    </ul> -->
    <div class="container mx-auto m-14 ">
        <div class="flex flex-row ">
            <div class="w-4/5 mx-10 ">
                <h1 class="text-4xl mb-4">
                    <%= post.title %>
                </h1>
                <div class="flex">
                    <img src="" alt="">
                    <p class="mb-3 text-lg text-gray-500 md:text-xl dark:text-gray-400">
                        <%= post.content %>
                    </p>
                </div>
                <div class="flex mt-4">
                    <button id="likeButton"
                        class="bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow flex justify-center items-center">
                        <svg class="h-4 w-4 mr-1" fill="#000000" height="800px" width="800px" version="1.1" id="Capa_1"
                            xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                            viewBox="0 0 486.926 486.926" xml:space="preserve">
                            <g>
                                <path d="M462.8,181.564c-12.3-10.5-27.7-16.2-43.3-16.2h-15.8h-56.9h-32.4v-75.9c0-31.9-9.3-54.9-27.7-68.4
                           c-29.1-21.4-69.2-9.2-70.9-8.6c-5,1.6-8.4,6.2-8.4,11.4v84.9c0,27.7-13.2,51.2-39.3,69.9c-19.5,14-39.4,20.1-41.5,20.8l-2.9,0.7
                           c-4.3-7.3-12.2-12.2-21.3-12.2H24.7c-13.6,0-24.7,11.1-24.7,24.7v228.4c0,13.6,11.1,24.7,24.7,24.7h77.9c7.6,0,14.5-3.5,19-8.9
                           c12.5,13.3,30.2,21.6,49.4,21.6h65.9h6.8h135.1c45.9,0,75.2-24,80.4-66l26.9-166.9C489.8,221.564,480.9,196.964,462.8,181.564z
                            M103.2,441.064c0,0.4-0.3,0.7-0.7,0.7H24.7c-0.4,0-0.7-0.3-0.7-0.7v-228.4c0-0.4,0.3-0.7,0.7-0.7h77.9c0.4,0,0.7,0.3,0.7,0.7
                           v228.4H103.2z M462.2,241.764l-26.8,167.2c0,0.1,0,0.3-0.1,0.5c-3.7,29.9-22.7,45.1-56.6,45.1H243.6h-6.8h-65.9
                           c-21.3,0-39.8-15.9-43.1-36.9c-0.1-0.7-0.3-1.4-0.5-2.1v-191.6l5.2-1.2c0.2,0,0.3-0.1,0.5-0.1c1-0.3,24.7-7,48.6-24
                           c32.7-23.2,49.9-54.3,49.9-89.9v-75.3c10.4-1.7,28.2-2.6,41.1,7c11.8,8.7,17.8,25.2,17.8,49v87.8c0,6.6,5.4,12,12,12h44.4h56.9
                           h15.8c9.9,0,19.8,3.7,27.7,10.5C459,209.864,464.8,225.964,462.2,241.764z" />
                            </g>
                        </svg>
                        <p id="displayLike">
                            <%= post.likes.length %>
                        </p>
                    </button>
                    <button id="saveButton"
                        class="ml-2 bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow flex justify-center items-center">
                        <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M6.75 6L7.5 5.25H16.5L17.25 6V19.3162L12 16.2051L6.75 19.3162V6ZM8.25 6.75V16.6838L12 14.4615L15.75 16.6838V6.75H8.25Z"
                                fill="#080341" />
                        </svg>
                        <p class="saveButtonText">
                            <%= saveButtonText %>
                        </p>
                    </button>
                    <button id="followButton"
                        class="ml-2 bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow flex justify-center items-center lg:hidden">
                        <%= followButtonText %>
                    </button>
                </div>
                <div class="flex justify-between items-center mt-4 mb-6">
                    <h2 class="text-lg lg:text-2xl font-bold text-gray-900 dark:text-white">Comments (20)</h2>
                </div>
                <form class="">
                    <div
                        class="py-2 px-4 w-5/6 mb-4 bg-white rounded-lg rounded-t-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700 flex items-center">
                        <label for="comment" class="sr-only">Your comment</label>
                        <textarea id="commentInput" rows="4"
                            class=" border px-0 flex-grow text-sm text-gray-900 border-0 focus:ring-0 focus:outline-none dark:text-white dark:placeholder-gray-400 dark:bg-gray-800"
                            placeholder="Write a comment..." required></textarea>
                            <button type="submit" id="commentSubmit"
                            class="bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow ml-4">
                            Post comment
                        </button>
                    </div>


                </form>
            </div>
            <div class="w-1/5 flex flex-col justify-start mt-10 items-center hidden lg:block">

                <div class="flex flex-col mt-5  justify-center items-center ">
                    <div class="border flex lg:flex-col md:flex-row flex-col justify-center items-center">
                        <div class="avatar">
                            <div
                                class="w-32 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2 overflow-hidden">
                                <img src="https://daisyui.com/images/stock/photo-1534528741775-53994a69daeb.jpg" />
                            </div>
                        </div>
                        <div class="md:px-4 flex flex-col text-center justify-center">
                            <a class="p-1" href="/user/<%= post.owner._id %>/profile">
                                <%= post.author %>
                            </a>
                            <p class="p-1">sarjeetsingh4680@gmail.com</p>
                        </div>
                    </div>
                    <div class="mt-3">
                        <button id="followButtonLg"
                            class="ml-2 bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow flex justify-center items-center">
                            <%= followButtonText %>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ------------- -->
        <ul class=" w-3/5 ml-10" id="commentsList">
            <% for( let comment of comments ) { %>
                <li class=" flex flex-col p-1 rounded-sm border border-gray-700 mb-1">
                    <div class="flex p-2">
                        <img class="w-12 h-12 border-2 border-gray-300 rounded-full m-2" alt="Anonymous's avatar"
                            src="https://images.unsplash.com/photo-1492562080023-ab3db95bfbce?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&faces=1&faceindex=1&facepad=2.5&w=500&h=500&q=80">
                        <div class="flex flex-col flex-grow"> <!-- Add flex-grow class to make it expand -->
                            <p class="mb-1">
                                <%= comment.author %> 2days ago
                            </p>
                            <p>
                                <%= comment.comment%>
                            </p>
                        </div>
                    </div>
                    <!-- Aligns button to the right -->
                    <button class=" ml-auto mr-5 flex items-center deleteCommentButton" data-comment-id=<%=comment._id
                        %>>
                        <svg fill="#000000" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" class="h-4 w-4" viewBox="0 0 482.428 482.429"
                            xml:space="preserve">
                            <g>
                                <g>
                                    <path d="M381.163,57.799h-75.094C302.323,25.316,274.686,0,241.214,0c-33.471,0-61.104,25.315-64.85,57.799h-75.098
                                   c-30.39,0-55.111,24.728-55.111,55.117v2.828c0,23.223,14.46,43.1,34.83,51.199v260.369c0,30.39,24.724,55.117,55.112,55.117
                                   h210.236c30.389,0,55.111-24.729,55.111-55.117V166.944c20.369-8.1,34.83-27.977,34.83-51.199v-2.828
                                   C436.274,82.527,411.551,57.799,381.163,57.799z M241.214,26.139c19.037,0,34.927,13.645,38.443,31.66h-76.879
                                   C206.293,39.783,222.184,26.139,241.214,26.139z M375.305,427.312c0,15.978-13,28.979-28.973,28.979H136.096
                                   c-15.973,0-28.973-13.002-28.973-28.979V170.861h268.182V427.312z M410.135,115.744c0,15.978-13,28.979-28.973,28.979H101.266
                                   c-15.973,0-28.973-13.001-28.973-28.979v-2.828c0-15.978,13-28.979,28.973-28.979h279.897c15.973,0,28.973,13.001,28.973,28.979
                                   V115.744z" />
                                    <path
                                        d="M171.144,422.863c7.218,0,13.069-5.853,13.069-13.068V262.641c0-7.216-5.852-13.07-13.069-13.07
                                   c-7.217,0-13.069,5.854-13.069,13.07v147.154C158.074,417.012,163.926,422.863,171.144,422.863z" />
                                    <path
                                        d="M241.214,422.863c7.218,0,13.07-5.853,13.07-13.068V262.641c0-7.216-5.854-13.07-13.07-13.07
                                   c-7.217,0-13.069,5.854-13.069,13.07v147.154C228.145,417.012,233.996,422.863,241.214,422.863z" />
                                    <path
                                        d="M311.284,422.863c7.217,0,13.068-5.853,13.068-13.068V262.641c0-7.216-5.852-13.07-13.068-13.07
                                   c-7.219,0-13.07,5.854-13.07,13.07v147.154C298.213,417.012,304.067,422.863,311.284,422.863z" />
                                </g>
                            </g>
                        </svg>Delete
                    </button>
                </li>
                <% } %>
        </ul>
    </div>



    </div>

    <script>
        const postId = '<%=post._id%>';
        const owner = '<%=post.owner%>'
    </script>
    <script src="/scripts/addComments.js"></script>
    <script src="/scripts/deleteComments.js"></script>
    <script src="/scripts/likes.js"></script>
    <script src="/scripts/saved.js"></script>
    <script src="/scripts/follow.js"></script>